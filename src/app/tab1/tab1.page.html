<ion-header>
  <ion-toolbar>
    <ion-title>
      {{ esTaller ? 'Panel del Taller' : 'Panel del Motociclista' }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- VISTA TALLER -->
  <ng-container *ngIf="esTaller; else vistaMotociclista">

    <div class="panel-header">
      <h1>Bienvenido, {{ usuario?.nombre }}</h1>
      <p class="subtitle">
        Mantenimientos pendientes de validación (sellado).
      </p>
    </div>

    <div *ngIf="pendientes.length > 0; else sinPendientes">
      <div *ngFor="let p of pendientes" class="card-item">
        <h2>{{ p.tipo }}</h2>
        <p>Fecha: {{ p.fecha }} · Km: {{ p.km | number:'1.0-0' }}</p>
        <p *ngIf="p.notas">Notas: {{ p.notas }}</p>

        <button type="button" class="btn-primary" (click)="sellar(p)">
          Sellar mantenimiento
        </button>
      </div>
    </div>

    <ng-template #sinPendientes>
      <p class="empty">
        No hay mantenimientos pendientes de validación.
      </p>
    </ng-template>

  </ng-container>

  <!-- VISTA MOTOCICLISTA -->
  <ng-template #vistaMotociclista>
    <div class="panel-header">
      <h1>Hola, {{ usuario?.nombre }}</h1>
      <p class="subtitle">
        Resumen general de tu actividad en 2Ride.
      </p>
    </div>

    <div class="resumen-grid">
      <div class="resumen-card">
        <h3>Motos registradas</h3>
        <p class="resumen-valor">{{ motos.length }}</p>
      </div>

      <div class="resumen-card">
        <h3>Mantenimientos</h3>
        <p class="resumen-valor">{{ totalMantenimientos }}</p>
      </div>

      <div class="resumen-card">
        <h3>Recordatorios</h3>
        <p class="resumen-valor">{{ totalRecordatorios }}</p>
      </div>
    </div>

    <p class="nota">
      Puedes gestionar tus motocicletas y mantenimientos desde las pestañas
      <strong>Motos</strong> y <strong>Recordatorios</strong> en la parte inferior.
    </p>
  </ng-template>

</ion-content>
