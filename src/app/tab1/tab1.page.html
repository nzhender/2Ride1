<ion-header>
  <ion-toolbar>
    <ion-title>
      {{ esTaller ? 'Panel del Taller' : 'Panel del Motociclista' }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Vista para TALLER: lista de mantenimientos pendientes de sellar -->
  <ng-container *ngIf="esTaller; else vistaMotociclista">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Mantenimientos pendientes de validación</ion-card-title>
        <ion-card-subtitle>Sellado por taller</ion-card-subtitle>
      </ion-card-header>

      <ion-list *ngIf="pendientes.length > 0">
        <ion-item *ngFor="let p of pendientes">
          <ion-label>
            <h2>{{ p.tipo }}</h2>
            <p>Fecha: {{ p.fecha }} · Km: {{ p.km | number:'1.0-0' }}</p>
            <p *ngIf="p.notas">Notas: {{ p.notas }}</p>
          </ion-label>
          <ion-button slot="end" (click)="sellar(p)">
            Sellar
          </ion-button>
        </ion-item>
      </ion-list>

      <ion-item *ngIf="pendientes.length === 0">
        <ion-label color="medium">No hay mantenimientos pendientes.</ion-label>
      </ion-item>
    </ion-card>
  </ng-container>

  <!-- Vista para MOTOCICLISTA: resumen simple -->
  <ng-template #vistaMotociclista>
    <ion-card>
      <ion-card-header>
        <ion-card-title>Resumen</ion-card-title>
        <ion-card-subtitle>Hola {{ usuario?.nombre }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p>Motos registradas: <b>{{ motos.length }}</b></p>
        <p>Mantenimientos totales: <b>{{ totalMantenimientos }}</b></p>
        <p>Recordatorios creados: <b>{{ totalRecordatorios }}</b></p>
      </ion-card-content>
    </ion-card>
  </ng-template>

</ion-content>
